class zbAnalogueClock extends HTMLElement{constructor(){super();const t=document.createElement("style");t.textContent="\n            :host {\n                display: inline-block;\n            }\n            .face {\n                position: relative;  \n                display: inline-block;\n                width: 100%;\n                height: 100%;\n                min-width: 100px;\n                min-height: 100px;\n                background-color: rgb(253, 252, 237);\n                border-radius: 50%;\n                border: 2px solid black;\n            }\n\n            .face-hour-mark {\n                position: absolute;\n                width: 6%;\n                height: 1%;\n                transform:\n                    translate(783.33%,4950%)\n                    rotate(calc(var(--angle) * -1))\n                    translateX(-770%);\n                background-color: black;\n            }\n\n            .face-minute-mark {\n                position: absolute;\n                width: 4%;\n                height: 0.5%;\n                transform:\n                    translate(1200%,9950%)\n                    rotate(calc(var(--angle) * -1))\n                    translateX(-1165%);\n                background-color: black;\n            }\n\n            .number-parent {\n                position: absolute;\n                width: 20%;\n                height: 20%;\n                text-align: center;\n                display: table;\n                background-color: transparent;\n                transform:\n                    translate(200%, 200%)\n                    rotate(var(--angle))\n                    translateY(-180%)\n                rotate(calc(var(--angle) * -1));\n            }\n\n            .number-child {\n                display: table-cell;\n                vertical-align: middle;\n            }\n\n            .clock-hand {\n                position: absolute;\n                width: 100%;\n                height: 10%;\n                display: inline-block;\n            }\n\n            .clock-hour {\n                background-color: transparent;\n                transform: translate(0%, 450%) rotate(var(--angle))\n            }\n\n            .clock-hour-hand {\n                width: 40%;\n                height: 40%;\n                transform: translate(100%, 80%);\n                background-color: black;\n                clip-path: polygon(0% 50%, 25% 0%, 100% 50%, 25% 100%);\n            }\n\n            .clock-minute {\n                background-color: transparent;\n                transform: translate(0%, 450%) rotate(var(--angle))\n            }\n\n            .clock-minute-hand {\n                width: 60%;\n                height: 30%;\n                transform: translate(65%, 120%);\n                background-color: black;\n                clip-path: polygon(0% 50%, 18% 0%, 100% 50%, 18% 100%);\n            }\n\n            .clock-second {\n                background-color: transparent;\n                transform: translate(0%, 450%) rotate(var(--angle));\n            }\n\n            .clock-second-hand {\n                width: 60%;\n                height: 10%;\n                transform: translate(55%, 450%);\n                background-color: red;\n                clip-path: polygon(0% 0%, 100% 50%, 0% 100%);\n            }\n\n            .clock-center {\n                position: absolute;\n                width: 5%;\n                height: 5%;\n                border-radius: 50%;\n                background-color: red;\n                transform: translate(950%, 950%);\n            }",this._shadowRoot=this.attachShadow({mode:"open"}),this._shadowRoot.appendChild(t),this._update=this._update.bind(this)}connectedCallback(){this._create(),this._update(),this._timerId=setInterval(this._update,500)}disconnectedCallback(){this.timerId&&(clearInterval(this._timerId),delete this._timerId)}attributeChangedCallback(t,e,n){"roman"===t&&this._updateRoman()}static get observedAttributes(){return["roman"]}_create(){const t=document.createElement("div");t.setAttribute("class","face");const e=new Date;this._currentTime=e,this._addHourMarks(t),this._addMinuteMarks(t),this._addNumbers(t),this._addHourHand(e,t),this._addMinuteHand(e,t),this._addSecondHand(e,t),this._addCenterDot(t),this._shadowRoot.appendChild(t)}_addHourMarks(t){for(let e=0;e<12;e++){const n=document.createElement("div");n.setAttribute("class","face-hour-mark");const i=30*e;n.style.setProperty("--angle",i.toString()+"deg"),t.appendChild(n)}}_addMinuteMarks(t){for(let e=0;e<60;e++){if(0===e)continue;if(e%5==0)continue;const n=document.createElement("div");n.setAttribute("class","face-minute-mark");const i=6*e;n.style.setProperty("--angle",i.toString()+"deg"),t.appendChild(n)}}_addNumbers(t){this._numberChildElementList=[];for(let e=1;e<=12;e++){const n=document.createElement("div");n.setAttribute("class","number-parent");const i=30*e;n.style.setProperty("--angle",i.toString()+"deg");const r=document.createElement("div");r.setAttribute("class","number-child"),r.innerText=this._getNumberText(e),this._numberChildElementList.push(r),n.appendChild(r),t.appendChild(n)}}_addHourHand(t,e){this._hourParentElement=document.createElement("div"),this._hourParentElement.setAttribute("class","clock-hand clock-hour");const n=30*t.getHours()+t.getMinutes()/2-90;this._hourParentElement.style.setProperty("--angle",n.toString()+"deg");const i=document.createElement("div");i.setAttribute("class","clock-hour-hand"),this._hourParentElement.appendChild(i),e.appendChild(this._hourParentElement)}_addMinuteHand(t,e){this._minuteParentElement=document.createElement("div"),this._minuteParentElement.setAttribute("class","clock-hand clock-minute");const n=6*t.getMinutes()+t.getSeconds()/10-90;this._minuteParentElement.style.setProperty("--angle",n.toString()+"deg");const i=document.createElement("div");i.setAttribute("class","clock-minute-hand"),this._minuteParentElement.appendChild(i),e.appendChild(this._minuteParentElement)}_addSecondHand(t,e){this._secondParentElement=document.createElement("div"),this._secondParentElement.setAttribute("class","clock-hand clock-second");const n=6*t.getSeconds()-90;this._secondParentElement.style.setProperty("--angle",n.toString()+"deg");const i=document.createElement("div");i.setAttribute("class","clock-second-hand"),this._secondParentElement.appendChild(i),e.appendChild(this._secondParentElement)}_addCenterDot(t){const e=document.createElement("div");e.setAttribute("class","clock-center"),t.appendChild(e)}_update(){const t=new Date;if(this._currentTime.getHours()===t.getHours()&&this._currentTime.getMinutes()===t.getMinutes()&&this._currentTime.getSeconds()===t.getSeconds())return;this._currentTime=t;const e=30*t.getHours()+t.getMinutes()/2-90;this._hourParentElement.style.setProperty("--angle",e.toString()+"deg");const n=6*t.getMinutes()+t.getSeconds()/10-90;this._minuteParentElement.style.setProperty("--angle",n.toString()+"deg");const i=6*t.getSeconds()-90;this._secondParentElement.style.setProperty("--angle",i.toString()+"deg")}_updateRoman(){if(this._numberChildElementList)for(let t=1;t<=12;t++){this._numberChildElementList[t-1].innerText=this._getNumberText(t)}}_getNumberText(t){let e=!1;return!0===this.hasAttribute("roman")&&(e=!0),!1===e?t.toString():1===t?"I":2===t?"II":3===t?"III":4===t?"IV":5===t?"V":6===t?"VI":7===t?"VII":8===t?"VIII":9===t?"IX":10===t?"X":11===t?"XI":12===t?"XII":"ERROR"}}customElements.define("zb-analogue-clock",zbAnalogueClock);class zbCalendar extends HTMLElement{constructor(){super();const t=document.createElement("style");t.textContent="\n            :host {\n                display: inline-block;\n            }\n            .root {\n                min-width: 200px;\n                min-height: 200px;\n                height: 100%;\n                background-color: darkgray;\n                display: grid;\n                grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\n                grid-template-rows: 1fr 2fr 2fr 2fr 2fr 2fr 2fr; \n                grid-column-gap: 1px;\n                grid-row-gap: 1px;\n            }\n\n            .parent-cell {\n                position: relative;\n                cursor: pointer;\n            }\n            .child-cell {\n                position: absolute;\n                color: rgb(248, 248, 248);\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                user-select: none;\n            }\n\n            .parent-dayOfWeek {\n                background-color: royalblue;\n                cursor: default;\n            }\n            .parent-normal-odd {\n                background-color: rgb(248, 248, 248);\n            }\n            .parent-normal-even {\n                background-color: rgb(230, 230, 230);\n            }\n            .parent-highlightColumn-odd {\n                background-color: lightgoldenrodyellow;\n            }\n            .parent-highlightColumn-even {\n                background-color: #dadab9;\n            }\n            .parent-selected {\n                background-color: #8dc8f7;\n                border: 2px solid #3f51b5;\n            }\n\n            .parent-normal-odd:hover {\n                background-color: lightsteelblue;\n            }\n            .parent-normal-even:hover {\n                background-color: lightsteelblue;\n            }\n            .parent-highlightColumn-odd:hover {\n                background-color: lightsteelblue;\n            }\n            .parent-highlightColumn-even:hover {\n                background-color: lightsteelblue;\n            }\n            .parent-selected:hover {\n                background-color: #6f9ec3;\n                border: 2px solid #3f51b5;\n            }\n\n            .child-dayOfWeek {\n                color: rgb(248, 248, 248);\n                font-size: 1em;\n            }\n            .child-normal {\n                color: rgb(48, 48, 48);\n                font-size: 2em;\n            }\n            .child-nonMonth {\n                color: #9e9e9e;\n                font-size: 2em;\n            }";const e=document.createElement("div");e.setAttribute("class","root"),this._dayOfWeekList=[],this._dayOfMonthList=[],this._createDaysOfWeek(e),this._createDaysOfMonth(e);const n=this.attachShadow({mode:"open"});n.appendChild(t),n.appendChild(e),this._clickEvent=this._clickEvent.bind(this),this.selectedEvent=new Event("selected")}get culture(){return this.getAttribute("culture")}set culture(t){zbValidate.isString(t),this.setAttribute("culture",t)}get value(){return this.getAttribute("value")}set value(t){zbValidate.isString(t),this.setAttribute("value",t)}get firstDay(){return this.getAttribute("first-day")}set firstDay(t){zbValidate.isString(t),this.setAttribute("first-day",t)}get highlightDays(){return this.getAttribute("highlight-days")}set highlightDays(t){zbValidate.isString(t),this.setAttribute("highlight-days",t)}get highlight(){return!0===this.hasAttribute("highlight")}set highlight(t){zbValidate.isBoolean(t),!0===t?this.setAttribute("highlight",t):this.removeAttribute("highlight")}_createDaysOfWeek(t){for(let e=1;e<=7;e++){const n={};n.parentCell=document.createElement("div"),n.parentCell.style.gridRow=1,n.parentCell.style.gridColumn=e,n.parentCell.className="parent-cell parent-dayOfWeek",n.childCell=document.createElement("div"),n.childCell.className="child-cell dayOfWeek-child",n.parentCell.appendChild(n.childCell),this._dayOfWeekList.push(n),t.appendChild(n.parentCell)}}_createDaysOfMonth(t){for(let e=2;e<=7;e++){const n={dayList:[]};for(let i=1;i<=7;i++){const r={day:0,month:0,highlighted:!1};r.parentCell=document.createElement("div"),r.parentCell.style.gridRow=e,r.parentCell.style.gridColumn=i,r.defaultClass="parent-cell",r.defaultClass+=i%2?" parent-normal-even":" parent-normal-odd",r.parentCell.className=r.defaultClass,r.childCell=document.createElement("div"),r.childCell.className="child-cell child-normal",r.parentCell.appendChild(r.childCell),n.dayList.push(r),t.appendChild(r.parentCell)}this._dayOfMonthList.push(n)}}connectedCallback(){this._updateGrid(),this._updateMonth(),this._addClickEventListener()}disconnectedCallback(){this._removeClickEventListener()}attributeChangedCallback(t,e,n){"value"!==t&&"highlight"!==t||this._updateMonth(),"highlight-days"===t&&this._updateGrid(),"culture"!==t&&"first-day"!==t||(this._updateGrid(),this._updateMonth())}static get observedAttributes(){return["value","culture","first-day","highlight-days","highlight"]}_updateGrid(){let t=null;if(!0===this.hasAttribute("culture"))try{t=zbCulture.find(this.getAttribute("culture")),null===t&&console.error("Culture not found")}catch(t){console.error("Culture not found")}null===t&&(t=zbCulture.default);let e=zbDayOfWeek.MONDAY;if(!0===this.hasAttribute("first-day")){const t=this.getAttribute("first-day").toLowerCase();"monday"===t&&(e=zbDayOfWeek.MONDAY),"tuesday"===t&&(e=zbDayOfWeek.TUESDAY),"wednesday"===t&&(e=zbDayOfWeek.WEDNESDAY),"thursday"===t&&(e=zbDayOfWeek.THURSDAY),"friday"===t&&(e=zbDayOfWeek.FRIDAY),"saturday"===t&&(e=zbDayOfWeek.SATURDAY),"sunday"===t&&(e=zbDayOfWeek.SUNDAY)}let n=[zbDayOfWeek.SATURDAY,zbDayOfWeek.SUNDAY];if(!0===this.hasAttribute("highlight-days")){const t=this.getAttribute("highlight-days").toLowerCase();n=[],t.split(",").forEach((function(t){"sunday"===t&&n.push(zbDayOfWeek.SUNDAY),"monday"===t&&n.push(zbDayOfWeek.MONDAY),"tuesday"===t&&n.push(zbDayOfWeek.TUESDAY),"wednesday"===t&&n.push(zbDayOfWeek.WEDNESDAY),"thursday"===t&&n.push(zbDayOfWeek.THURSDAY),"friday"===t&&n.push(zbDayOfWeek.FRIDAY),"saturday"===t&&n.push(zbDayOfWeek.SATURDAY)}))}for(let n=0;n<7;n++){const i=this._getColumnDayOfWeek(n,e),r=t.shortDayOfWeekList[i].toUpperCase();this._dayOfWeekList[n].childCell.innerText=r}for(let t=0;t<7;t++){const i=this._getColumnDayOfWeek(t,e);let r=!1;for(let t=0;t<n.length;t++){if(n[t]===i){r=!0;break}}for(let e=0;e<6;e++){const n=this._dayOfMonthList[e].dayList[t];n.defaultClass="parent-cell",n.defaultClass+=!0===r?(e+1)%2?" parent-highlightColumn-even":" parent-highlightColumn-odd":(e+1)%2?" parent-normal-even":" parent-normal-odd",n.parentCell.className=n.defaultClass}}}_updateMonth(){let t=zbDate.getToday();if(!0===this.hasAttribute("value"))try{t=zbDate.fromString(this.getAttribute("value"))}catch(t){return void console.error("Invalid date value. Format must be in YYYY-MM-DD.")}let e=!1;!0===this.hasAttribute("highlight")&&(e=!0);let n=zbDayOfWeek.MONDAY;if(!0===this.hasAttribute("first-day")){const t=this.getAttribute("first-day").toLowerCase();"monday"===t&&(n=zbDayOfWeek.MONDAY),"tuesday"===t&&(n=zbDayOfWeek.TUESDAY),"wednesday"===t&&(n=zbDayOfWeek.WEDNESDAY),"thursday"===t&&(n=zbDayOfWeek.THURSDAY),"friday"===t&&(n=zbDayOfWeek.FRIDAY),"saturday"===t&&(n=zbDayOfWeek.SATURDAY),"sunday"===t&&(n=zbDayOfWeek.SUNDAY)}const i=zbDate.getDaysInMonth(t.year,t.month),r=new zbDate(t.year,t.month,1),s=r.getDayOfWeek(),a=r.addMonths(-1),l=zbDate.getDaysInMonth(a.year,a.month);let o=-1,d=-1;for(let e=0;e<7;e++){if(this._getColumnDayOfWeek(e,n)===s){if(0===e){o=1,d=t.month;break}o=l-e+1,d=a.month;break}}for(let n=0;n<6;n++){const r=this._dayOfMonthList[n];for(let n=0;n<7;n++){const s=r.dayList[n];let a=!1;d!==t.month?o>l?(o=1,d++,d>12&&(d=1)):a=!0:o>i&&(a=!0,o=1,d++,d>12&&(d=1)),!0!==s.highlighted||o===t.day&&d===t.month||(s.parentCell.className=s.defaultClass,s.highlighted=!1),o===t.day&&d===t.month&&(!0===e?(s.parentCell.className="parent-cell parent-selected",s.highlighted=!0):(s.parentCell.className=s.defaultClass,s.highlighted=!1)),s.childCell.className=!1===a?"child-cell child-normal":"child-cell child-nonMonth",s.childCell.innerText=o.toString(),s.parentCell.nonMonth=a,s.parentCell.year=t.year,s.parentCell.day=o,s.parentCell.month=d,s.childCell.nonMonth=a,s.childCell.year=t.year,s.childCell.day=o,s.childCell.month=d,o++}}}_addClickEventListener(){for(let t=0;t<6;t++){const e=this._dayOfMonthList[t];for(let t=0;t<7;t++){e.dayList[t].parentCell.addEventListener("click",this._clickEvent)}}}_removeClickEventListener(){for(let t=0;t<6;t++){const e=this._dayOfMonthList[t];for(let t=0;t<7;t++){e.dayList[t].parentCell.removeEventListener("click",this._clickEvent)}}}_clickEvent(t){if(!0===t.target.nonMonth)return;const e=t.target.year,n=t.target.month,i=t.target.day,r=new zbDate(e,n,i);this.setAttribute("value",r.toString()),this.dispatchEvent(this.selectedEvent)}_getColumnDayOfWeek(t,e){let n=e+t;return n>=7&&(n-=7),0===n?zbDayOfWeek.SUNDAY:1===n?zbDayOfWeek.MONDAY:2===n?zbDayOfWeek.TUESDAY:3===n?zbDayOfWeek.WEDNESDAY:4===n?zbDayOfWeek.THURSDAY:5===n?zbDayOfWeek.FRIDAY:6===n?zbDayOfWeek.SATURDAY:zbDayOfWeek.MONDAY}}customElements.define("zb-calendar",zbCalendar);class zbDayCalendar extends HTMLElement{constructor(){super();const t=document.createElement("style");t.textContent="\n            :host {\n                display: inline-block;\n            }\n            .root {\n                min-width: 200px;\n                min-height: 200px;\n                user-select: none;\n            }\n            .header {\n                background-image: linear-gradient(rgb(248, 0, 0), rgb(200, 0, 0));\n                color: rgb(248, 248, 248);\n                border-top-left-radius: 10px;\n                border-top-right-radius: 10px;\n                border-top: 3px solid rgb(48, 48, 48);\n                border-left: 3px solid rgb(48, 48, 48);\n                border-right: 3px solid rgb(48, 48, 48);\n                font-size: 2em;\n                text-align: center;\n                padding: 0.5em;\n            }\n            .body {\n                background-color: white;\n                font-size: 6em;\n                color: rgb(48, 48, 48);\n                border-left: 3px solid rgb(48, 48, 48);\n                border-right: 3px solid rgb(48, 48, 48);\n                text-align: center;\n                padding: 0.1em;\n            }\n            .footer {\n                background-color: white;\n                color: rgb(48, 48, 48);\n                border-bottom-left-radius: 10px;\n                border-bottom-right-radius: 10px;\n                border-left: 3px solid rgb(48, 48, 48);\n                border-right: 3px solid rgb(48, 48, 48);\n                border-bottom: 3px solid rgb(48, 48, 48);\n                font-size: 1.5em;\n                text-align: center;\n                padding-left: 0.2em;\n                padding-right: 0.2em;\n                padding-bottom: 0.4em;\n            }";const e=document.createElement("div");e.setAttribute("class","root"),this._headerDiv=document.createElement("div"),this._headerDiv.setAttribute("class","header"),this._bodyDiv=document.createElement("div"),this._bodyDiv.setAttribute("class","body"),this._footerDiv=document.createElement("div"),this._footerDiv.setAttribute("class","footer"),e.appendChild(this._headerDiv),e.appendChild(this._bodyDiv),e.appendChild(this._footerDiv);const n=this.attachShadow({mode:"open"});n.appendChild(t),n.appendChild(e)}get culture(){return this.getAttribute("culture")}set culture(t){zbValidate.isString(t),this.setAttribute("culture",t)}get value(){return this.getAttribute("value")}set value(t){zbValidate.isString(t),this.setAttribute("value",t)}connectedCallback(){this._update()}attributeChangedCallback(t,e,n){"value"!==t&&"culture"!==t||this._update()}static get observedAttributes(){return["value","culture"]}_update(){let t=zbDate.getToday();if(!0===this.hasAttribute("value"))try{t=zbDate.fromString(this.getAttribute("value"))}catch(t){return void console.error("Invalid date value. Format must be in YYYY-MM-DD.")}let e=null;if(!0===this.hasAttribute("culture"))try{e=zbCulture.find(this.getAttribute("culture")),null===e&&console.error("Culture not found")}catch(t){console.error("Culture not found")}null===e&&(e=zbCulture.default);const n=e.monthList[t.month-1].toUpperCase(),i=t.getDayOfWeek(),r=e.dayOfWeekList[i].toUpperCase();this._headerDiv.innerText=n,this._bodyDiv.innerText=t.day.toString(),this._footerDiv.innerText=r}}customElements.define("zb-day-calendar",zbDayCalendar);class zbDigitalClock extends HTMLElement{constructor(){super();const t=document.createElement("style");t.textContent='\n            :host {\n                display: inline-block;\n            }\n            .root12 {\n                min-width: 280px;\n                min-height: 100px;\n                height: 100%;\n                width: 100%;\n                background-color: rgb(48, 48, 48);\n                display: grid;\n                grid-template-columns: 4fr 4fr 1fr 4fr 4fr 2fr;\n                grid-template-rows: 1fr;\n                grid-column-gap: 0.5em;\n                padding: 0.4em;\n            }\n            .root24 {\n                min-width: 280px;\n                min-height: 100px;\n                height: 100%;\n                width: 100%;\n                background-color: rgb(48, 48, 48);\n                display: grid;\n                grid-template-columns: 4fr 4fr 1fr 4fr 4fr;\n                grid-template-rows: 1fr;\n                grid-column-gap: 0.5em;\n                padding: 0.4em;\n            }\n            .digit {\n                height: 100%;\n                display: grid;\n                grid-template-columns: 1fr 2fr 1fr;\n                grid-template-rows: 1fr 2fr 1fr 2fr 1fr;\n                grid-column-gap: 1px;\n                grid-row-gap: 1px;\n            }\n            .digit-line-on {\n                background-color: rgb(248, 248, 248);\n            }\n            .digit-line-off {\n                background-color: rgb(55, 55, 55);\n            }\n            .digit-gap {\n                background-color: rgb(48, 48, 48);\n            }\n            .dots {      \n                height: 100%;\n                display: grid;\n                grid-template-columns: 1fr;\n                grid-template-rows: 2fr 1fr 3fr 1fr 2fr;\n                grid-column-gap: 1px;\n                grid-row-gap: 1px;\n            }\n            .dot {\n                background-color: rgb(248, 248, 248);\n                border-radius: 50%;\n            }\n            .ampm {\n                height: 100%;\n                display: grid;\n                grid-template-columns: 1fr;\n                grid-template-rows: 1fr 1fr;\n                grid-column-gap: 1px;\n                grid-row-gap: 1px;\n                font-family: "Lucida Console", Courier, monospace;\n                font-size: 1em;\n            }\n            .ampm-parent {\n                position: relative;\n                width: 100%;\n                height: 100%;\n            }\n            .ampm-child {\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n            }\n            .ampm-on {\n                color: rgb(248, 248, 248);\n            }\n            .ampm-off {\n                color: rgb(55, 55, 55);\n            }\n            @keyframes blink {\n                50% {\n                    opacity: 0.0;\n                }\n            }\n            .blink {\n                animation: blink 1s step-start 0s infinite;\n            }',this._shadowRoot=this.attachShadow({mode:"open"}),this._shadowRoot.appendChild(t),this._update=this._update.bind(this)}get show24HourClock(){return!0===this.hasAttribute("show24HourClock")}set show24HourClock(t){zbValidate.isBoolean(t),!0===t?this.setAttribute("show24hour",t):this.removeAttribute("show24hour")}connectedCallback(){this._create(),this._update(),this._timerId=setInterval(this._update,1e3)}disconnectedCallback(){this.timerId&&(clearInterval(this._timerId),delete this._timerId)}attributeChangedCallback(t,e,n){"show24hour"===t&&(this._create(),this._update())}static get observedAttributes(){return["show24hour"]}_create(){let t=!1;!0===this.hasAttribute("show24hour")&&(t=!0);const e=document.createElement("div");!0===t?e.setAttribute("class","root24"):e.setAttribute("class","root12"),this._digit=[4],this._digit[0]={},this._digit[1]={},this._digit[2]={},this._digit[3]={};const n=this._createDigit(0),i=this._createDigit(1),r=this._createDots(),s=this._createDigit(2),a=this._createDigit(3);if(e.appendChild(n),e.appendChild(i),e.appendChild(r),e.appendChild(s),e.appendChild(a),!1===t){const t=this._createAmpm();e.appendChild(t)}this._rootDiv&&this._shadowRoot.removeChild(this._rootDiv),this._rootDiv=e,this._shadowRoot.appendChild(this._rootDiv),this._currentTime&&delete this._currentTime}_createDigit(t){const e=this._digit[t];e.lineList=[];const n=document.createElement("div");n.style.gridRow=1,n.style.gridColumn=e,n.className="digit";for(let t=1;t<=5;t++)for(let i=1;i<=3;i++){const r=document.createElement("div");r.style.gridRow=t,r.style.gridColumn=i,1===i&&1===t&&(r.style.borderTopLeftRadius="50%"),3===i&&1===t&&(r.style.borderTopRightRadius="50%"),1===i&&5===t&&(r.style.borderBottomLeftRadius="50%"),3===i&&5===t&&(r.style.borderBottomRightRadius="50%"),r.className="digit-line-off",2!==i||2!==t&&4!==t||(r.className="digit-gap"),n.appendChild(r),e.lineList.push(r)}return n}_createDots(){const t=document.createElement("div");t.style.gridRow=1,t.style.gridColumn=3,t.className="dots";const e=document.createElement("div");e.style.gridRow=2,e.style.gridColumn=1,e.className="dot blink";const n=document.createElement("div");return n.style.gridRow=4,n.style.gridColumn=1,n.className="dot blink",t.appendChild(e),t.appendChild(n),t}_createAmpm(){const t=document.createElement("div");t.style.gridRow=1,t.style.gridColumn=6,t.className="ampm";const e=document.createElement("div");e.style.gridRow=1,e.style.gridColumn=1;const n=document.createElement("div");n.className="ampm-parent",this._amChildDomElement=document.createElement("div"),this._amChildDomElement.className="ampm-child ampm-off",this._amChildDomElement.innerText="AM",n.appendChild(this._amChildDomElement),e.appendChild(n);const i=document.createElement("div");i.style.gridRow=2,i.style.gridColumn=1;const r=document.createElement("div");return r.className="ampm-parent",this._pmChildDomElement=document.createElement("div"),this._pmChildDomElement.className="ampm-child ampm-off",this._pmChildDomElement.innerText="PM",r.appendChild(this._pmChildDomElement),i.appendChild(r),t.appendChild(e),t.appendChild(i),t}_update(){const t=zbTime.getNow();if(this._currentTime&&this._currentTime.hour===t.hour&&this._currentTime.minute===t.minute)return;this._currentTime=t;let e=!1;!0===this.hasAttribute("show24hour")&&(e=!0);let n=t.hour;!1===e&&n>12&&(n-=12);let i=Math.floor(n/10);const r=n%10,s=Math.floor(t.minute/10),a=t.minute%10;!1===e&&0===i&&(i=-1),this._setDigitLines(this._digit[0],i),this._setDigitLines(this._digit[1],r),this._setDigitLines(this._digit[2],s),this._setDigitLines(this._digit[3],a),!1===e&&(this._currentTime.hour<12?(this._amChildDomElement.className="ampm-child ampm-on",this._pmChildDomElement.className="ampm-child ampm-off"):(this._amChildDomElement.className="ampm-child ampm-off",this._pmChildDomElement.className="ampm-child ampm-on"))}_setDigitLines(t,e){const n=zbDigitalClock._getNumberSwitchList(e);for(let e=0;e<15;e++){const i=t.lineList[e];!0===n[e]?i.className="digit-line-on":i.className="digit-line-off"}}static _getNumberSwitchList(t){return-1===t?[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]:0===t?[!0,!0,!0,!0,!1,!0,!0,!1,!0,!0,!1,!0,!0,!0,!0]:1===t?[!1,!1,!0,!1,!1,!0,!1,!1,!0,!1,!1,!0,!1,!1,!0]:2===t?[!0,!0,!0,!1,!1,!0,!0,!0,!0,!0,!1,!1,!0,!0,!0]:3===t?[!0,!0,!0,!1,!1,!0,!1,!0,!0,!1,!1,!0,!0,!0,!0]:4===t?[!0,!1,!0,!0,!1,!0,!0,!0,!0,!1,!1,!0,!1,!1,!0]:5===t?[!0,!0,!0,!0,!1,!1,!0,!0,!0,!1,!1,!0,!0,!0,!0]:6===t?[!0,!0,!0,!0,!1,!1,!0,!0,!0,!0,!1,!0,!0,!0,!0]:7===t?[!0,!0,!0,!1,!1,!0,!1,!1,!0,!1,!1,!0,!1,!1,!0]:8===t?[!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!1,!0,!0,!0,!0]:9===t?[!0,!0,!0,!0,!1,!0,!0,!0,!0,!1,!1,!0,!0,!0,!0]:void 0}}customElements.define("zb-digital-clock",zbDigitalClock);class zbFractal extends HTMLElement{constructor(){super();const t=document.createElement("style");t.textContent="\n            :host {\n                display: inline-block;\n            }\n            .root {\n                min-width: 200px;\n                min-height: 200px;\n                width: 100%;\n                height: 100%;\n                background-color: darkgray;\n                margin: 0px;\n                padding: 0px;\n            }";const e=document.createElement("div");e.setAttribute("class","root"),this._canvas=document.createElement("canvas"),this._canvas.style.padding="0px",this._canvas.style.margin="0px",this._canvas.style.display="block",e.appendChild(this._canvas);const n=this.attachShadow({mode:"open"});n.appendChild(t),n.appendChild(e),this._fractalWorkerMessage=this._fractalWorkerMessage.bind(this),this._render={},this._render.scaleX=0,this._render.scaleY=0,this._render.scaleWidth=0,this._render.pixelWidth=0,this._render.pixelHeight=0,this._render.lineFrom=0,this._render.lineTo=0,this._render.colorRange=32,this._render.colorMap="0,0,0,255,0,0",this._render.antiAliasing=1,this._render.interval=1e3,this._controlPressed=!1,this._clickEvent=this._clickEvent.bind(this),this._keydownEvent=this._keydownEvent.bind(this),this._keyupEvent=this._keyupEvent.bind(this)}connectedCallback(){this._canvas.style.width=this.getAttribute("pixel-width")+"px",this._canvas.style.height=this.getAttribute("pixel-height")+"px",this._canvas.width=this.getAttribute("pixel-width"),this._canvas.height=this.getAttribute("pixel-height"),this._canvasContext=this._canvas.getContext("2d"),this._canvas.addEventListener("click",this._clickEvent),window.addEventListener("keydown",this._keydownEvent),window.addEventListener("keyup",this._keyupEvent)}disconnectedCallback(){this.renderStop(),this._canvas.removeEventListener("click",this._clickEvent),window.removeEventListener("keydown",this._keydownEvent,!0),window.removeEventListener("keyup",this._keyupEvent,!0)}attributeChangedCallback(t,e,n){"pixel-width"!==t&&"pixel-height"!==t||(this._canvas.style.width=this.getAttribute("pixel-width")+"px",this._canvas.style.height=this.getAttribute("pixel-height")+"px",this._canvas.width=this.getAttribute("pixel-width"),this._canvas.height=this.getAttribute("pixel-height"))}static get observedAttributes(){return["pixel-width","pixel-height"]}_clickEvent(t){if(this._threadItemList&&0!==this._threadItemList.length)return;const e=this._render.pixelHeight/this._render.pixelWidth*this._render.scaleWidth,n=this._render.scaleX+t.clientX/this._render.pixelWidth*this._render.scaleWidth,i=this._render.scaleY+t.clientY/this._render.pixelHeight*e;let r=this._render.scaleWidth/2,s=e/2,a=n-r/2,l=i-s/2;!0===this._controlPressed&&(r=this._render.scaleWidth/.5,s=e/.5,a=n-r/2,l=i-s/2);const o={};o.pixelX=t.clientX,o.pixelY=t.clientY,o.scaleX=a,o.scaleY=l,o.scaleWidth=r,o.scaleHeight=s;const d=new CustomEvent("zoom",{detail:o});this.dispatchEvent(d)}_keydownEvent(t){"17"==t.which&&(this._controlPressed=!0)}_keyupEvent(t){"17"==t.which&&(this._controlPressed=!1)}renderStart(){this.renderStop();let t=1;!0===this.hasAttribute("threads")&&(t=parseInt(this.getAttribute("threads")),(t<1||t>12)&&(t=1));const e=this.getAttribute("fractal-worker-url");this._threadItemList=[];for(let n=0;n<t;n++){const t={};t.number=n,t.working=!1,t.fractalWorker=new Worker(e),t.fractalWorker.addEventListener("message",this._fractalWorkerMessage),this._threadItemList.push(t)}this._renderJobList=[];let n=1;for(let t=1;t<=this._canvas.height;t+=10){const e={};e.number=n,e.lineFrom=t,e.lineTo=t+10,e.lineTo>this._canvas.height&&(e.lineTo=this._canvas.height),e.working=!1,e.done=!1,this._renderJobList.push(e),n++}this._render.scaleX=parseFloat(this.getAttribute("scale-x")),this._render.scaleY=parseFloat(this.getAttribute("scale-y")),this._render.scaleWidth=parseFloat(this.getAttribute("scale-width")),this._render.pixelWidth=this._canvas.width,this._render.pixelHeight=this._canvas.height,this._render.colorRange=parseInt(this.getAttribute("color-range")),this._render.colorRange<8&&(this._render.colorRange=8),this._render.colorRange>128&&(this._render.colorRange=128),this._render.colorMap=this.getAttribute("color-map"),0===this._render.colorMap.length&&(this._render.colorMap="0,0,0,255,0,0"),this._render.antiAliasing=1,"1x1"===this.getAttribute("anti-aliasing")&&(this._render.antiAliasing=1),"2x2"===this.getAttribute("anti-aliasing")&&(this._render.antiAliasing=2),"4x4"===this.getAttribute("anti-aliasing")&&(this._render.antiAliasing=4),"8x8"===this.getAttribute("anti-aliasing")&&(this._render.antiAliasing=8),"16x16"===this.getAttribute("anti-aliasing")&&(this._render.antiAliasing=16),this._render.interval=parseInt(this.getAttribute("interval")),this._render.interval<250&&(this._render.interval=250),this._render.interval>1e6&&(this._render.interval=1e6),this._renderEngine()}renderStop(){if(this._threadItemList){for(let t=0;t<this._threadItemList.length;t++){this._threadItemList[t].fractalWorker.terminate()}this._threadItemList=[]}}_renderEngine(){const t=this._renderJobList.length;let e=0;for(let t=0;t<this._renderJobList.length;t++){!1!==this._renderJobList[t].done&&e++}const n={};n.toDo=t,n.done=e;const i=new CustomEvent("progress",{detail:n});this.dispatchEvent(i);for(let t=0;t<this._threadItemList.length;t++){const e=this._threadItemList[t];if(!0===e.working)continue;let n=null;for(let t=0;t<this._renderJobList.length;t++){const e=this._renderJobList[t];if(!0!==e.working&&!0!==e.done){n=e;break}}if(null===n)return void this._threadItemList.splice(t,1);this._render.threadNumber=e.number,this._render.jobNumber=n.number,this._render.lineFrom=n.lineFrom,this._render.lineTo=n.lineTo,n.working=!0,e.fractalWorker.postMessage(this._render),e.working=!0}}_fractalWorkerMessage(t){if(!1!==t.data.done){for(let e=0;e<this._threadItemList.length;e++){const n=this._threadItemList[e];if(n.number===t.data.threadNumber){n.working=!1;break}}for(let e=0;e<this._renderJobList.length;e++){const n=this._renderJobList[e];if(n.number===t.data.jobNumber){n.working=!1,n.done=!0;break}}this._renderEngine()}else{const e=t.data.linePixelData;this._canvasContext.putImageData(e,0,t.data.lineNumber-1)}}}window.customElements.define("zb-fractal",zbFractal);